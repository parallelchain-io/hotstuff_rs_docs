<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Pluggable, replicable applications."><title>hotstuff_rs::app - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="hotstuff_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0 (90b35a623 2024-11-26)" data-channel="1.83.0" data-search-js="search-f0d225181b97f9a4.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../hotstuff_rs/index.html"><img src="https://raw.githubusercontent.com/parallelchain-io/hotstuff_rs/refs/heads/final_touches/readme_assets/HotStuff-rs%20logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../hotstuff_rs/index.html"><img src="https://raw.githubusercontent.com/parallelchain-io/hotstuff_rs/refs/heads/final_touches/readme_assets/HotStuff-rs%20logo.png" alt="logo"></a><h2><a href="../../hotstuff_rs/index.html">hotstuff_<wbr>rs</a><span class="version">0.4.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module app</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#applications" title="Applications">Applications</a></li><li><a href="#two-app-mutable-states-app-state-and-validator-set" title="Two app-mutable states: App State and Validator Set">Two app-mutable states: App State and Validator Set</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate hotstuff_<wbr>rs</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">hotstuff_rs</a></span><h1>Module <span>app</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/hotstuff_rs/app.rs.html#6-278">source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Pluggable, replicable applications.</p>
<h2 id="applications"><a class="doc-anchor" href="#applications">§</a>Applications</h2>
<p>The basic interaction between HotStuff-rs and the library user is this:</p>
<ol>
<li>Library user specifies a state machine.</li>
<li>Library user provides the state machine to HotStuff-rs</li>
<li>HotStuff-rs replicates the state machine.</li>
</ol>
<p>We refer to the state machine in this basic interaction as the <strong>“application”</strong>. In short, an
application is a state machine that mutates
<a href="#two-app-mutable-states-app-state-and-validator-set">two states</a>, namely the <em>App State</em> and the
<em>Validator Set</em>, in response to receiving a payload called a <a href="../types/block/struct.Block.html" title="struct hotstuff_rs::types::block::Block"><code>Block</code></a>. In other words, an
application can be thought of as a function (a “state transition function”) with the following type
signature: <code>(AppState, ValidatorSet, Block) -&gt; (AppState, ValidatorSet)</code>.</p>
<p>To specify an application, the library user must implement the <a href="trait.App.html" title="trait hotstuff_rs::app::App"><code>App</code></a> trait. This entails
implementing a state transition function and exposing this function to HotStuff-rs through three
different <a href="trait.App.html#required-methods" title="trait hotstuff_rs::app::App">required methods</a>, namely <code>produce_block</code>, <code>validate_block</code>, and
<code>validate_block_for_sync</code>.</p>
<p>Each of the above three methods correspond to a distinct context in which HotStuff-rs will call the
application’s state transition function. For example, HotStuff-rs will call <code>produce_block</code> when the
local replica is a leader and needs to produce a new block to propose it. The context in which each
function is called is documented in their respective Rustdocs.</p>
<h2 id="two-app-mutable-states-app-state-and-validator-set"><a class="doc-anchor" href="#two-app-mutable-states-app-state-and-validator-set">§</a>Two app-mutable states: App State and Validator Set</h2>
<p>The two states that an application can mutate in response to a block are the App State, and the
Validator Set. Both states are stored in the block tree, which itself is stored in the pluggable
<a href="../block_tree/pluggables/trait.KVStore.html" title="trait hotstuff_rs::block_tree::pluggables::KVStore"><code>KVStore</code></a> provided to HotStuff-rs by the library user.</p>
<p>The <strong>App State</strong> is a set of key-value mappings, in which the keys and values are be arbitrary byte
strings. The library user is completely free to decide the structure and contents of this mapping
in whichever way supports their use-case. HotStuff-rs itself does not assume anything about the app
state, nor does it insert anything into the app state when a replica is
<a href="../replica/struct.Replica.html#method.initialize" title="associated function hotstuff_rs::replica::Replica::initialize"><code>initialize</code></a>d besides what the library user configures as the
<code>initial_app_state</code>.</p>
<p>For more information about the <strong>Validator Set</strong>, read the rustdocs in the
<a href="../types/validator_set/index.html" title="mod hotstuff_rs::types::validator_set"><code>validator_set</code></a> module.</p>
<p><code>App</code> code tells HotStuff-rs to make changes to the app state and the validator set by listing the
changes that should be made in an <a href="../types/update_sets/type.AppStateUpdates.html" title="type hotstuff_rs::types::update_sets::AppStateUpdates"><code>AppStateUpdates</code></a> or <a href="../types/update_sets/type.ValidatorSetUpdates.html" title="type hotstuff_rs::types::update_sets::ValidatorSetUpdates"><code>ValidatorSetUpdates</code></a> (respectively) and
returning these changes from calls to its three methods.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ProduceBlockRequest.html" title="struct hotstuff_rs::app::ProduceBlockRequest">Produce<wbr>Block<wbr>Request</a></div><div class="desc docblock-short">Request for an <code>App</code> to produce a new block extending a specific <code>parent_block</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.ProduceBlockResponse.html" title="struct hotstuff_rs::app::ProduceBlockResponse">Produce<wbr>Block<wbr>Response</a></div><div class="desc docblock-short">Response from an <code>App</code> to a <a href="struct.ProduceBlockRequest.html" title="struct hotstuff_rs::app::ProduceBlockRequest"><code>ProduceBlockRequest</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ValidateBlockRequest.html" title="struct hotstuff_rs::app::ValidateBlockRequest">Validate<wbr>Block<wbr>Request</a></div><div class="desc docblock-short">Request for the app to validate a proposed block. Contains information about the proposed
<a href="../types/block/struct.Block.html" title="struct hotstuff_rs::types::block::Block">block</a>, and the relevant
<a href="../block_tree/accessors/app/struct.AppBlockTreeView.html" title="struct hotstuff_rs::block_tree::accessors::app::AppBlockTreeView">state of the Block Tree</a>.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ValidateBlockResponse.html" title="enum hotstuff_rs::app::ValidateBlockResponse">Validate<wbr>Block<wbr>Response</a></div><div class="desc docblock-short">Response from an <code>App</code> upon receiving a <a href="struct.ValidateBlockRequest.html" title="struct hotstuff_rs::app::ValidateBlockRequest"><code>ValidateBlockRequest</code></a>.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.App.html" title="trait hotstuff_rs::app::App">App</a></div><div class="desc docblock-short">Trait implemented by applications that are to be replicated by HotStuff-rs.</div></li></ul></section></div></main></body></html>