<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implements the `BlockSyncServer` for the block sync protocol, which helps the replicas lagging behind catch up with the head of the blockchain in a safe and live manner."><title>hotstuff_rs::block_sync::server - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="hotstuff_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0 (90b35a623 2024-11-26)" data-channel="1.83.0" data-search-js="search-f0d225181b97f9a4.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../../../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/parallelchain-io/hotstuff_rs/refs/heads/final_touches/readme_assets/HotStuff-rs%20logo.png"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../hotstuff_rs/index.html"><img src="https://raw.githubusercontent.com/parallelchain-io/hotstuff_rs/refs/heads/final_touches/readme_assets/HotStuff-rs%20logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../hotstuff_rs/index.html"><img src="https://raw.githubusercontent.com/parallelchain-io/hotstuff_rs/refs/heads/final_touches/readme_assets/HotStuff-rs%20logo.png" alt="logo"></a><h2><a href="../../../hotstuff_rs/index.html">hotstuff_<wbr>rs</a><span class="version">0.4.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module server</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#block-sync-process" title="Block sync process">Block sync process</a></li><li><a href="#block-sync-trigger-and-block-sync-server-selection" title="Block sync trigger and block sync server selection">Block sync trigger and block sync server selection</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In hotstuff_<wbr>rs::<wbr>block_<wbr>sync</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../index.html">hotstuff_rs</a>::<wbr><a href="../index.html">block_sync</a></span><h1>Module <span>server</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/hotstuff_rs/block_sync/server.rs.html#6-209">source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implements the <a href="struct.BlockSyncServer.html" title="struct hotstuff_rs::block_sync::server::BlockSyncServer"><code>BlockSyncServer</code></a> for the block sync protocol, which helps the replicas lagging
behind catch up with the head of the blockchain in a safe and live manner.</p>
<p>A replica might be lagging behind for various reasons, such as network outage, downtime, or
deliberate action by Byzantine leaders.</p>
<p>The server’s responsibility as part of the protocol is to:</p>
<ol>
<li>Respond to block sync requests (“block sync process” part of the protocol).</li>
<li>Periodically broadcast advertisements which serve to notify other replicas about the server’s
availability and view of the blockchain (“block sync trigger” and “block sync server selection”).</li>
</ol>
<h3 id="block-sync-process"><a class="doc-anchor" href="#block-sync-process">§</a>Block sync process</h3>
<p>As part of the sync process, the server responds to any received sync requests with blocks starting
from a given start height. The number of blocks sent back in a response is limited by a configurable
limit.</p>
<p>The client side of this protocol is explained <a href="../client/index.html" title="mod hotstuff_rs::block_sync::client">here</a>.</p>
<h3 id="block-sync-trigger-and-block-sync-server-selection"><a class="doc-anchor" href="#block-sync-trigger-and-block-sync-server-selection">§</a>Block sync trigger and block sync server selection</h3>
<p>Maintaining a sync server that periodically notifies other replicas about its state of the block
tree and its availability plays an important role in ensuring that lagging replicas try to sync
when there is evidence that they are lagging behind, and that they sync with a peer who is ahead
of them.</p>
<p>A block sync server notifies others about its availability and state of the block tree by
broadcasting <a href="../messages/enum.BlockSyncAdvertiseMessage.html" title="enum hotstuff_rs::block_sync::messages::BlockSyncAdvertiseMessage"><code>BlockSyncAdvertiseMessage</code></a>s.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BlockSyncServer.html" title="struct hotstuff_rs::block_sync::server::BlockSyncServer">Block<wbr>Sync<wbr>Server</a></div></li><li><div class="item-name"><a class="struct" href="struct.BlockSyncServerConfiguration.html" title="struct hotstuff_rs::block_sync::server::BlockSyncServerConfiguration">Block<wbr>Sync<wbr>Server<wbr>Configuration</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Parameters that are used to configure the behaviour of the Block Sync Server. These should not
change after the server starts.</div></li></ul></section></div></main></body></html>